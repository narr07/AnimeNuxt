<template>
  <div>
    <svg width="443" height="290" viewBox="0 0 443 290" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g id="Vector">
        <mask id="path-1-inside-1_4_9" fill="white">
          <path d="M248.485 289.318H413.14C418.37 289.318 423.507 287.983 428.037 285.443C432.537 282.932 436.297 279.279 438.94 274.851C441.546 270.476 442.924 265.478 442.926 260.384C442.926 255.306 441.544 250.319 438.926 245.921L328.35 59.9322C325.707 55.5062 321.948 51.8544 317.449 49.3436C312.897 46.7981 307.769 45.4634 302.555 45.467C297.325 45.467 292.19 46.8042 287.66 49.3436C283.162 51.8545 279.402 55.5063 276.76 59.9322L248.485 107.519L193.206 14.4617C190.561 10.036 186.799 6.38491 182.299 3.87481C177.745 1.33019 172.617 -0.00383988 167.402 8.30186e-06C162.173 8.30186e-06 157.035 1.33722 152.505 3.87481C148.005 6.38515 144.245 10.0363 141.6 14.4617L3.99672 245.921C1.38581 250.293 0.00479577 255.291 0 260.384C0 265.463 1.37203 270.453 3.98634 274.851C6.62929 279.279 10.3898 282.932 14.8899 285.443C19.443 287.989 24.572 289.323 29.7868 289.318H133.143C174.094 289.318 204.293 271.851 225.074 237.773L275.525 152.927L302.546 107.519L383.647 243.912H275.525L248.485 289.318ZM131.456 243.867L59.3279 243.849L167.45 62.0038L221.399 152.927L185.278 213.698C171.478 235.809 155.801 243.865 131.457 243.865" />
        </mask>
        <path d="M248.485 289.318L244.189 286.76L239.688 294.318H248.485V289.318ZM428.037 285.443L425.6 281.077L425.592 281.082L428.037 285.443ZM438.94 274.851L443.233 277.414L443.236 277.41L438.94 274.851ZM442.926 260.384L447.926 260.387V260.384H442.926ZM438.926 245.921L434.628 248.476L434.63 248.478L438.926 245.921ZM328.35 59.9322L332.648 57.377L332.643 57.3686L328.35 59.9322ZM317.449 49.3436L315.008 53.7075L315.012 53.7096L317.449 49.3436ZM302.555 45.467L302.555 50.467L302.559 50.467L302.555 45.467ZM287.66 49.3436L290.097 53.7095L290.105 53.705L287.66 49.3436ZM276.76 59.9322L272.467 57.369L272.461 57.3781L276.76 59.9322ZM248.485 107.519L244.186 110.073L248.485 117.309L252.784 110.073L248.485 107.519ZM193.206 14.4617L197.505 11.9081L197.498 11.8965L193.206 14.4617ZM182.299 3.87481L179.86 8.23949L179.863 8.2415L182.299 3.87481ZM167.402 8.30186e-06L167.402 5.00001L167.406 5.00001L167.402 8.30186e-06ZM152.505 3.87481L154.941 8.24126L154.949 8.23693L152.505 3.87481ZM141.6 14.4617L137.308 11.8967L137.302 11.9066L141.6 14.4617ZM3.99672 245.921L8.2895 248.485L8.29457 248.476L3.99672 245.921ZM0 260.384L-5 260.38V260.384H0ZM3.98634 274.851L-0.311636 277.406L-0.306925 277.414L3.98634 274.851ZM14.8899 285.443L17.3298 281.079L17.3266 281.077L14.8899 285.443ZM29.7868 289.318L29.7868 284.318L29.7824 284.318L29.7868 289.318ZM225.074 237.773L229.343 240.376L229.358 240.352L229.372 240.328L225.074 237.773ZM275.525 152.927L271.228 150.371L271.227 150.372L275.525 152.927ZM302.546 107.519L306.844 104.964L302.548 97.7391L298.25 104.962L302.546 107.519ZM383.647 243.912V248.912H392.437L387.945 241.356L383.647 243.912ZM275.525 243.912V238.912H272.683L271.229 241.353L275.525 243.912ZM59.3279 243.849L55.0302 241.294L50.5392 248.847L59.3267 248.849L59.3279 243.849ZM167.45 62.0038L171.75 59.4524L167.455 52.2128L163.153 59.4485L167.45 62.0038ZM221.399 152.927L225.697 155.482L227.214 152.93L225.699 150.376L221.399 152.927ZM185.278 213.698L189.52 216.345L189.549 216.299L189.576 216.253L185.278 213.698ZM248.485 294.318H413.14V284.318H248.485V294.318ZM413.14 294.318C419.219 294.318 425.199 292.766 430.482 289.805L425.592 281.082C421.815 283.199 417.521 284.318 413.14 284.318V294.318ZM430.473 289.809C435.74 286.87 440.141 282.595 443.233 277.414L434.647 272.289C432.454 275.963 429.333 278.994 425.6 281.077L430.473 289.809ZM443.236 277.41C446.303 272.262 447.923 266.381 447.926 260.387L437.926 260.382C437.924 264.576 436.79 268.691 434.645 272.292L443.236 277.41ZM447.926 260.384C447.926 254.395 446.296 248.526 443.223 243.364L434.63 248.478C436.793 252.112 437.926 256.217 437.926 260.384H447.926ZM443.224 243.366L332.648 57.377L324.053 62.4873L434.628 248.476L443.224 243.366ZM332.643 57.3686C329.551 52.1898 325.151 47.9162 319.885 44.9775L315.012 53.7096C318.744 55.7926 321.864 58.8226 324.058 62.4957L332.643 57.3686ZM319.889 44.9796C314.591 42.0166 308.621 40.4628 302.552 40.467L302.559 50.467C306.917 50.464 311.203 51.5795 315.008 53.7075L319.889 44.9796ZM302.555 40.467C296.474 40.467 290.496 42.0213 285.215 44.9822L290.105 53.705C293.883 51.5872 298.175 50.467 302.555 50.467V40.467ZM285.223 44.9777C279.958 47.9165 275.559 52.1902 272.467 57.369L281.053 62.4953C283.246 58.8224 286.365 55.7925 290.097 53.7095L285.223 44.9777ZM272.461 57.3781L244.187 104.965L252.784 110.073L281.058 62.4862L272.461 57.3781ZM252.784 104.966L197.505 11.9081L188.907 17.0153L244.186 110.073L252.784 104.966ZM197.498 11.8965C194.403 6.71834 190.001 2.44574 184.734 -0.49188L179.863 8.2415C183.597 10.3241 186.719 13.3537 188.914 17.0269L197.498 11.8965ZM184.738 -0.489868C179.438 -3.45158 173.469 -5.00447 167.398 -4.99999L167.406 5.00001C171.765 4.99679 176.053 6.11196 179.86 8.23949L184.738 -0.489868ZM167.402 -4.99999C161.323 -4.99999 155.343 -3.44593 150.061 -0.487305L154.949 8.23693C158.727 6.12038 163.023 5.00001 167.402 5.00001V-4.99999ZM150.069 -0.491633C144.803 2.44627 140.402 6.71885 137.308 11.8967L145.892 17.0266C148.087 13.3537 151.208 10.324 154.941 8.24126L150.069 -0.491633ZM137.302 11.9066L-0.301135 243.366L8.29457 248.476L145.898 17.0168L137.302 11.9066ZM-0.296056 243.357C-3.36913 248.503 -4.99435 254.385 -5 260.38L5 260.389C5.00395 256.196 6.14075 252.083 8.28949 248.485L-0.296056 243.357ZM-5 260.384C-5 266.366 -3.38342 272.239 -0.311629 277.406L8.28431 272.296C6.12749 268.668 5 264.56 5 260.384H-5ZM-0.306925 277.414C2.78563 282.595 7.18629 286.87 12.4533 289.809L17.3266 281.077C13.5933 278.994 10.473 275.963 8.2796 272.288L-0.306925 277.414ZM12.4501 289.808C17.7499 292.77 23.7204 294.323 29.7912 294.318L29.7824 284.318C25.4235 284.322 21.1361 283.207 17.3298 281.079L12.4501 289.808ZM29.7868 294.318H133.143V284.318H29.7868V294.318ZM133.143 294.318C175.859 294.318 207.665 275.925 229.343 240.376L220.805 235.17C200.921 267.777 172.33 284.318 133.143 284.318V294.318ZM229.372 240.328L279.822 155.483L271.227 150.372L220.777 235.218L229.372 240.328ZM279.821 155.484L306.843 110.076L298.25 104.962L271.228 150.371L279.821 155.484ZM298.249 110.075L379.349 246.467L387.945 241.356L306.844 104.964L298.249 110.075ZM383.647 238.912H275.525V248.912H383.647V238.912ZM271.229 241.353L244.189 286.76L252.781 291.876L279.82 246.47L271.229 241.353ZM131.457 238.867L59.3291 238.849L59.3267 248.849L131.455 248.867L131.457 238.867ZM63.6256 246.405L171.748 64.5591L163.153 59.4485L55.0302 241.294L63.6256 246.405ZM163.15 64.5552L217.099 155.479L225.699 150.376L171.75 59.4524L163.15 64.5552ZM217.101 150.373L180.98 211.143L189.576 216.253L225.697 155.482L217.101 150.373ZM181.037 211.051C174.444 221.614 167.642 228.441 159.912 232.692C152.181 236.944 143.077 238.865 131.457 238.865V248.865C144.181 248.865 155.088 246.758 164.731 241.454C174.376 236.15 182.313 227.893 189.52 216.345L181.037 211.051Z" fill="black" mask="url(#path-1-inside-1_4_9)" />
      </g>
    </svg>

    <button @click="playAnimation('line-drawing')">
      Play
    </button>
    <button @click="pauseAnimation('line-drawing')">
      Pause
    </button>
    <button @click="restartAnimation('line-drawing')">
      Restart
    </button>
    <button @click="reverseAnimation('line-drawing')">
      Reverse
    </button>
  </div>
</template>

<script setup lang="ts">
import { onMounted } from 'vue';
import { useNuxtApp } from '#app';
import { useAnimationControls } from '~/composables/useAnimationControls';

const { createAnimation, playAnimation, pauseAnimation, restartAnimation, reverseAnimation } = useAnimationControls();
const { $anime } = useNuxtApp();

onMounted(() => {
  createAnimation('line-drawing', {
    targets: '#path-1-inside-1_4_9',
    strokeDasharray: [$anime.setDashoffset, $anime.setDashoffset],
    strokeDashoffset: [$anime.setDashoffset, 0],
    easing: 'easeInOutSine',
    duration: 1500,
    delay: (el, i) => i * 250,
    direction: 'alternate',
    loop: true,
  });
});
</script>
